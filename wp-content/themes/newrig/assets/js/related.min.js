"use strict";var postID=postdata.post_ID,catIDs=postdata.cat_ids,restURL=postdata.rest_url,queryURL="".concat(restURL,"posts?per_page=3&categories=").concat(catIDs,"&exclude=").concat(postID,"&_embed=true");function getFeaturedImage(e){if(0===e.featured_media)return"";var t=e._embedded["wp:featuredmedia"][0];console.log(t);var n=t.media_details.sizes.newrigRelated.width,a=t.media_details.sizes.newrigRelated.height;return'\n\t<figure class="related-post__image">\n\t\t<img src="'.concat(t.media_details.sizes.newrigRelated.source_url,'"\n\t\t\t \'width="').concat(n,'"\n\t\t\t \'height="').concat(a,'"\n\t\t\t \'alt="" \' +\n\t\t>\n\t</figure>')}function thePost(e){var t=document.createElement("div");t.className="related-post";var n=new Date(e.date),a='\n<a href="'.concat(e.link,'">\n\t').concat(getFeaturedImage(e),'\n\t<h3 class="related-post__title">\n\t\t').concat(e.title.rendered,'\n\t</h3>\n\t<div class="related-post__meta">\n\t\tPublished <time class="entry-date published" datetime="').concat(n,'">').concat(n.toDateString(),'</time>\n\t</div>\n\t<p class="related-post__excerpt">\n\t\t').concat(e.excerpt.rendered,"\n\t</p>\n</a>");return t.innerHTML=a,t}function displayRelatedPosts(e){var t=document.querySelector(".related-posts");e.forEach(function(e){t.append(thePost(e))})}function sendRESTquery(){fetch(queryURL).then(function(e){return e.json()}).then(function(e){return displayRelatedPosts(e)}).then(document.querySelector(".related-spinner").remove())}window.addEventListener("load",function(e){new IntersectionObserver(function(e,t){e.forEach(function(e){e.isIntersecting&&(sendRESTquery(),t.disconnect())})}).observe(document.querySelector(".related-posts"))},!1);